Program vano;
uses crt, graph;
{Подключаем библиатеки crt и graph}
var
{Вводим переменные}
matr :array[1..100] of real;
x,y,otrelem,prinelem,N,codeerr,Driver,Mode: Integer;
readstr, numstr :string;

label
{Вводим метки}
narray,nelement;

begin
  Driver := Detect;
  InitGraph(Driver, Mode,'');  {Запускаем графический режим}
SetBkColor(12); {Устанавливем цвет фона}
setfillstyle(1,12); {Устанавливаем тип и цвет заливки}
setcolor(3); {Устанавливаем цвет которым будем рисовать}

rectangle(0,0,639,479);
setcolor(1);
rectangle(2,2,637,477);
setcolor(15);           {Эти 4 строки нарисовали рамку по бокам экрана}

outtextxy(10,10,'Задача:');
outtextxy(10,20,'Даны натуральные числа N, действительные числа А1..Аn.');
outtextxy(10,30,'В последовательности А1..Аn все неотрицательные члены, не');
outtextxy(10,40,'принадлежащие отрезку [1..2] заменить на единицу. Кроме того,');
outtextxy(10,50,'получить число отрицательных членов и членов принадлежащих отрезку.');
{Написали текст в заданные координаты}
setcolor(11);

line(3,65,636,65);
line(3,85,636,85);
{Нарисовали строчку в котрой затем будем выводить сообщения}

setcolor(15);
outtextxy(40,100,'Введите колличество элементов массива:');
{Выводим текстовую строку на экран}
window(45,7,48,7); {Создаем текстовое окно в которое будем вводить  колличество элементов массива}
narray: {Это метка}
readln(readstr); {Считываем колличество элементов массива}
val(readstr,n,codeerr); {Преобразовываем строчку в число}
if (codeerr <> 0) or (n > 100) or (n < 0) then {Если число введено не правильно то}
begin
outtextxy(40,70,'Неправильно введено число, нажмите на любую клавишу и повторите ввод');
{Выводим сообщение}
readkey; {Ждем нажатия на клавишу}
bar(4,66,635,84); {Стираем сообщение нарисовав на его месте прямоугольник того же цвета что и цвет фона}
goto narray; {Отправляемся к метке и повторяем ввод снова}
end;

bar(4,86,635,476); {Стираем все предыдущие сообщения}

outtextxy(40,100,'Введите элеменнты массива. Всего элементов в массиве - ' + readstr);
{Выводим строчку на экран}
window(38,9,53,9);
{Создаем текстовое окно}
for x:=1 to N do {Начинаем цикл ввода элементов массива}
begin
Nelement: {Это метка}
bar(264,132,286,138);
str(x,numstr); {Преобразуем цифру в строчку}
outtextxy(40,132,'Вводиться элемент массива № '+numstr);
readln(readstr); {Считываем элемент массива}
val(readstr,matr[x],codeerr); {Преобразуем считанную строку в цифру}
if codeerr <> 0 then {Если строка в цифру не преобразовалась то}
begin
outtextxy(40,70,'Неправильно введено число, нажмите на любую клавишу и повторите ввод');
{Выводим сообщение}
readkey; {Ждем нажатия на клавишу}
bar(4,66,635,84); {Стираем сообщение}
goto Nelement; {Переходим к началу цикла}
end;
end;

window(1,1,80,25); {Разварачиваем текстовое окно на весь экран}
bar(4,86,635,476); {Стираем сообщения выданные циклом ввода переменных}
outtextxy(40,70,'Ответ...');
outtextxy(80,100,'Было        Стало'); {Выводим надписи}

for x:=1 to N do {Цикл вывода ответов}
begin
y:=y+1; {В переменной Y содержится количество выведенных на экран строк.
На экран не помещается более 36 строк поэтоме}
If y = 36 then {Если выведено 36 строк}
begin
outtextxy(240,220,'Все элементы массива не умещаются на экран');
outtextxy(240,230,'Нажмите любую клавишу для продолжения...');
{Выводим сообщение}
readkey; {Ждем нажатия на клавишу}
bar(4,86,635,476); {Стираем все строчки}
y := 1; {Кооличество введенных строк приравниваем к 1}
end;
str(x,numstr); {Преобразуем цифру в строку}
outtextxy(5,100+y*10,numstr+')'); {Выводим номер строки и скобочку}

str(matr[x]:15:2,numstr); {Преобразуем цифру в строку}
outtextxy(15,100+y*10,numstr); {Выводим начальное значение}

if matr[x]<0 then otrelem := otrelem+1; {Если число в массиве отрицательное,
то счетчик отрицательных чисел увеличиваем на 1 }
if (matr[x]>=1) and (matr[x]<=2) then prinelem:=prinelem+1;
{Если число в массиве принадлежит промежутку [1..2] то  счетчик чисел
принадлежащих промежутку увеличиваем на 1}
if (matr[x]>=0) and (matr[x]<1) or (matr[x]>2) then matr[x] := 1;
{Если число в массиве неотрицательное и не принадлежит промежутку [1..2], то
заменяем его на 1}
str(matr[x]:15:2,numstr); {Преобразуем число в строку}
outtextxy(115,100+y*10,numstr); {Выводим конечное значение}

end;

str(otrelem,numstr); {Преобразуем число в строку}
Outtextxy(240,110,'Число отрицательных членов = '+numstr);{Выводим сообщение}
str(prinelem,numstr); {Преобразуем число в строку}
outtextxy(240,120,'Число членов пренадлежащих отрезку [1..2] = '+numstr);{Выводим сообщение}
readkey;{Ждем нажатия на клавишу}
closegraph;{Закрываем графический режим}
end.

